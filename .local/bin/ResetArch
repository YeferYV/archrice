#!/bin/bash

# exit on error
set -eu

# curl -LO blackarch.org/strap.sh
# sh strap.sh

# curl -LO larbs.xyz/larbs.sh
# sh larbs.sh

# curl -LO nixos.org/nix/install
# sh install

# curl LO raw.githubusercontent.com/Homebrew/install/HEAD/install.sh
# bash install.sh

# sed -n '17,129p' ResetArch | sed 's/ \//g' > resetarchpackages
# comm -23 <(pacman -Qeq|sort) <(pacman -Qqg base-devel|sort) > installedpackages

#-- Pacman configs
[ $(id -u) == 0 ] && printf "\e[1;31mRun it as unprivileged user(wheel group), sudo command needed\e[0m\n" >&2 && exit 1
sudo sed -i '33s/#//' /etc/pacman.conf
sudo sed -i '37s/#//' /etc/pacman.conf
sudo pacman-key --init
sudo pacman-key --populate
sudo pacman -Sy  --noconfirm archlinux-keyring
sudo pacman -Syu --noconfirm base-devel git

#-- Neovim version 0.7.2
sudo curl -Lo /usr/local/bin/nvim https://github.com/neovim/neovim/releases/download/v0.7.2/nvim.appimage && sudo chmod +x /usr/local/bin/nvim

#-- yay
git clone https://aur.archlinux.org/yay-bin.git /tmp/yay-bin
cd /tmp/yay-bin
makepkg -si --noconfirm

#-- Packages excluded on docker
[ ! -e /.dockerenv ] && yes | yay -S --noconfirm \
bedstead-fonts \
broadcom-wl \
bspwm \
btrfs-progs \
cronie \
dosfstools \
dmenu \
dragon-drop \
dunst \
exfat-utils \
festival-us \
fuse2 \
gnome-keyring \
google-chrome \
gtk-theme-arc-gruvbox-git \
htop-vim \
imagemagick \
kitty \
libnotify \
light \
maim \
man-db \
mediainfo \
moreutils \
mpc \
mpd \
mpv-mpris \
ncmpcpp \
network-manager-applet \
ntfs-3g \
picom \
pipewire \
pipewire-pulse \
playerctl \
polybar \
redshift \
siji-git \
snapper \
snapper-rollback \
sxhkd \
sxiv \
touchcursor-linux-git \
ttf-unifont \
unclutter \
xcape \
xdo \
xdotool \
xorg-server \
xorg-xinit \
xorg-xmodmap \
xorg-xset \
xorg-xsetroot \
xf86-input-synaptics \
xwallpaper \
zathura-pdf-mupdf \

#-- 4rch dependencies
yes | yay -S --noconfirm \
bat \
cht.sh-git \
ffmpegthumbnailer \
fzf \
lazygit \
lf \
libsixel \
mupdf-tools \
mpv \
perl-file-mimeinfo \
ripgrep \
starship \
stow \
trash-cli \
unzip \
wezterm \
xclip \
zsh-autosuggestions \
zsh-fast-syntax-highlighting \

#-- Clean
true | yay -Scc

#-- Optional
# 8188eu-aircrack-dkms-git
# acpi
# abook
# aircrack-ng
# alacritty
# alttab-git
# arandr
# arandr
# atool
# base
# bc
# bcm43142-firmware
# binfmt-qemu-static
# brave-bin
# bashtop
# blackarch-keyring
# blueman
# bsp-layout
# cdrtools
# cheat-git
# cheat-sh
# chromium
# command-not-found
# cool-retro-term
# devour
# djvulibre
# dmenu
# docker
# dwm
# dialog
# dwmblocks
# efibootmgr
# grub
# ffmpeg
# ffmpeg-git
# figlet
# fzf-tab-bin-git
# gimp
# grub-btrfs
# gvim
# hashcat
# highlight
# htop-vim-git
# i3-gaps
# i3-vim-syntax-git
# i3status
# intel-ucode
# lazygit
# lf-sixel-git
# libreoffice
# libsixel
# libxft-bgra
# linux
# linux-firmware
# linux-headers
# linux-wifi-hotspot
# lunarvim-git
# mlocate
# mlterm
# moreutils
# mpv-full
# mtools
# mutt-wizard-git
# ncdu
# neofetch
# nerd-fonts-cascadia-code
# nerd-fonts-hack
# networkmanager
# newsboat
# ngrok
# nmap
# nodejs-how2
# notcurses
# noto-fonts-emoji
# novnc
# obs-studio
# os-prober
# pavucontrol
# pamixer
# paru-bin
# pcmanfm-gtk3
# pfetch
# poppler
# pulseaudio-alsa
# pulsemixer
# pywal
# python-ueberzug-git
# qemu-user-static
# ranger-sixel
# rxvt-unicode
# scrcpy
# sgtk-menu
# simple-mtpfs
# sixel-tmux-git
# skippy-xd-git
# spaceship-prompt
# spotify
# spotify-adblock-git
# spotify-adkiller-git
# sshfs
# stpv-git
# sxhkhm-git
# task-spooler
# terminus-font
# termplay
# tigervnc
# tmate
# transmission-cli
# transmission-gtk
# tsserver
# ttf-hack
# ttf-unifont
# ueberzug
# unrar
# urxvt-perls
# vimv-git
# vscodium-bin
# vscodium-bin-marketplace
# wmctrl
# xcompmgr
# x2x-git
# xf86-video-amdgpu
# xorg-fonts-misc
# xorg-xwininfo
# xorg-xdpyinfo
# xorg-xprop
# ytfzf
# youtube-dl
# zsh-completions
# zsh-vi-mode
# zip
